// Source code is decompiled from a .class file using FernFlower decompiler.
package com.voting;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ResultServlet extends HttpServlet {
   public ResultServlet() {
   }

   protected void doGet(HttpServletRequest var1, HttpServletResponse var2) throws ServletException, IOException {
      var2.setContentType("text/html");
      PrintWriter var3 = var2.getWriter();
      var3.println("<html><head><title>Results</title></head><body>");
      var3.println("<h2>Voting Results</h2>");
      var3.println("<table border='1'><tr><th>Candidate</th><th>Votes</th></tr>");

      try {
         Class.forName("com.mysql.cj.jdbc.Driver");
         Connection var4 = DriverManager.getConnection("jdbc:mysql://localhost:3306/votingdb", "root", "Ramya@1431");
         PreparedStatement var5 = var4.prepareStatement("SELECT candidate, COUNT(*) AS votes FROM votes GROUP BY candidate");
         ResultSet var6 = var5.executeQuery();

         while(var6.next()) {
            String var10001 = var6.getString("candidate");
            var3.println("<tr><td>" + var10001 + "</td><td>" + var6.getInt("votes") + "</td></tr>");
         }
      } catch (Exception var7) {
         var7.printStackTrace();
      }

      var3.println("</table></body></html>");
   }
}
